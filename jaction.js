/**
 * @author jAction　Project.
 * jAction Ver1.10 20120613
 * Copyright (c) jAction　Project.
 * MITライセンスとします。
 */
window.addEventListener('load',ja_Start,false);var ja_canvas;var ja_context;var ja_downCheck=false;var ja_touch_x;var ja_touch_y;var ja_touch_flg=false;var ja_touch_up=false;var ja_portrait=true;function ja_Start(){var element=document.createElement('div');element.id="jaction";element.style.position='relative';this.isTouch=('ontouchstart'in window);if(this.isTouch){element.style.left='50%';element.style.marginLeft='-160px';element.style.top=window.innerHeight*0.5+'px';element.style.marginTop='-240px'}var objBody=document.getElementsByTagName("body").item(0);objBody.appendChild(element);ja.root=new ja_MainClass();new Main()};function ja_SoundSet(){var ua=navigator.userAgent;if(ua.indexOf("Android")>0){var element=document.createElement('div');element.id="sound";element.style.position='absolute';element.style.zIndex='2';document.getElementById('jaction').appendChild(element);var sc=document.createElement('script');sc.src='sound_swf.js';element.appendChild(sc)}};ja_CanvasSet=function(id){if(id==undefined){id="canvas"}var element=document.createElement('div');element.id=id;element.style.position='absolute';element.style.zIndex='1';document.getElementById('jaction').appendChild(element);ja_canvas=document.createElement('canvas');ja_canvas.id="ja_canvas";ja_canvas.width="320";ja_canvas.height="480";element.appendChild(ja_canvas);var objBody=document.getElementsByTagName("body").item(0);ja_CanvasStart()};jaction=function(){this.addChild=function(imageObj,layer,parentObj){layer.push(imageObj);imageObj.parentObj=parentObj};this.getChildAt=function(depth,layer){if(layer!=null&&depth<layer.length){return layer[depth]}else{return null}};this.getChildByName=function(name,layer){if(layer!=null&&layer.length>0){var returnObj=null;for(var i=0;i<layer.length;i++){var displayObj=layer[i];if(displayObj.name==name){returnObj=displayObj;break}}return returnObj}else{return null}};this.removeChild=function(imageObj,layer){for(var i=0;i<layer.length;i++){if(layer[i]==imageObj){layer.splice(i,1);break}}};this.removeChildAt=function(depth,layer){if(depth<layer.length){layer.splice(depth,1)}};this.numChildren=function(layer){return layer.length};this.mouseChildren=function(layer,mouseEnable){for(var i=layer.length-1;i>=0;i--){var imageObj=layer[i];imageObj.mouseEnabled=mouseEnable}}};jaction.prototype.Container=function(){EventDispatcher.initialize(this);this.x=0;this.y=0;this.alpha=1;this.visible=true;var sX=1;var sY=1;var me=this;this.global_x=this.x;this.global_y=this.y;this.global_sx=1;this.global_sy=1;this.global_alpha=this.alpha;this.parentObj=null;var subLayer=[];this.mouseEnabled=true;this.scaleX=function(scale){sX=scale};this.scaleY=function(scale){sY=scale};this.draw=function(){if(this.visible){var ua=navigator.userAgent;if(ua.indexOf("Android 2.1")>0){var rate=Math.sqrt(320/screen.width);ja_context.scale(rate,rate)}if(this.parentObj!=null){this.global_x=this.parentObj.global_x+this.x;this.global_y=this.parentObj.global_y+this.y;this.global_sx=this.parentObj.global_sx*sX;this.global_sy=this.parentObj.global_sy*sY;this.global_alpha=this.parentObj.global_alpha*this.alpha}else{this.global_x=this.x;this.global_y=this.y;this.global_sx=sX;this.global_sy=sY;this.global_alpha=this.alpha}if(this.global_alpha!=ja_context.globalAlpha){ja_context.globalAlpha=this.global_alpha}ja_context.translate(this.x,this.y);ja_context.scale(this.global_sx,this.global_sy);for(var i=0;i<subLayer.length;i++){ja_context.save();var imageObj=subLayer[i];imageObj.draw();ja_context.restore()}}me.dispatchEvent({type:"onEnterFrame",target:me})};this.touchEventCh=function(){for(var i=subLayer.length-1;i>=0;i--){var imageObj=subLayer[i];imageObj.touchEventCh()}};this.touchEnd=function(){for(var i=subLayer.length-1;i>=0;i--){var imageObj=subLayer[i];imageObj.touchEnd()}};this.mouseChildren=function(mouseEnable){ja.mouseChildren(subLayer,mouseEnable)};this.destroy=function(){EventDispatcher.destroy(this)};this.addChild=function(imageObj){ja.addChild(imageObj,subLayer,this)};this.getChildAt=function(depth){return ja.getChildAt(depth,subLayer)};this.getChildByName=function(name){return ja.getChildByName(name,subLayer)};this.removeChild=function(imageObj){ja.removeChild(imageObj,subLayer)};this.removeChildAt=function(depth){ja.removeChildAt(depth,subLayer)};this.numChildren=function(){return ja.numChildren(subLayer)}};jaction.prototype.ImageClass=function(clone){EventDispatcher.initialize(this);this.image=new Image();this.x=0;this.y=0;this.w=0;this.h=0;this.alpha=1;this.visible=true;this.rollOver=false;this.mouseEnabled=true;var me=this;this.global_x=this.x;this.global_y=this.y;this.global_sx=1;this.global_sy=1;this.global_alpha=this.alpha;this.parentObj=null;var subLayer=[];var width;var height;if(clone){this.image=clone.image;this.w=this.image.width;this.h=this.image.height;height=this.image.height;width=this.image.width}else{this.image.onload=function(){me.w=me.image.width;me.h=me.image.height;height=me.image.height;width=me.image.width;me.dispatchEvent({type:"onLoad",target:me})}}this.scaleX=function(scale){this.w=width*scale};this.scaleY=function(scale){this.h=height*scale};this.draw=function(){if(this.visible){var ua=navigator.userAgent;if(ua.indexOf("Android 2.1")>0){var rate=Math.sqrt(320/screen.width);ja_context.scale(rate,rate)}var sX=this.w/width;var sY=this.h/height;if(this.parentObj!=null){this.global_x=this.parentObj.global_x+this.x;this.global_y=this.parentObj.global_y+this.y;this.global_sx=this.parentObj.global_sx*sX;this.global_sy=this.parentObj.global_sy*sY;this.global_alpha=this.parentObj.global_alpha*this.alpha}else{this.global_x=this.x;this.global_y=this.y;this.global_sx=sX;this.global_sy=sY;this.global_alpha=this.alpha}if(this.global_alpha!=ja_context.globalAlpha){ja_context.globalAlpha=this.global_alpha}ja_context.translate(this.x,this.y);ja_context.scale(this.global_sx,this.global_sy);ja_context.drawImage(this.image,0,0,width,height);for(var i=0;i<subLayer.length;i++){ja_context.save();var imageObj=subLayer[i];imageObj.draw();ja_context.restore()}}me.dispatchEvent({type:"onEnterFrame",target:me})};this.addChild=function(imageObj){ja.addChild(imageObj,subLayer,this)};this.getChildAt=function(depth){return ja.getChildAt(depth,subLayer)};this.getChildByName=function(name){return ja.getChildByName(name,subLayer)};this.removeChild=function(imageObj){ja.removeChild(imageObj,subLayer)};this.removeChildAt=function(depth){ja.removeChildAt(depth,subLayer)};this.numChildren=function(){return ja.numChildren(subLayer)};this.onLoad=function(imagepath){this.image.src=imagepath};this.destroy=function(){EventDispatcher.destroy(this);this.image=null};this.mouseChildren=function(mouseEnable){ja.mouseChildren(subLayer,mouseEnable)};this.touchEventCh=function(){for(var i=subLayer.length-1;i>=0;i--){var imageObj=subLayer[i];imageObj.touchEventCh()}if(!this.mouseEnabled){this.rollOver=false;return}if(!ja_touch_flg){if(this.visible){if(ja_touch_x>=this.global_x&&ja_touch_x<=(this.global_x+this.w)&&ja_touch_y>=this.global_y&&ja_touch_y<=(this.global_y+this.h)){ja_touch_flg=true;if(!this.rollOver){this.rollOver=true;this.dispatchEvent({type:"touchIn",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}else{this.dispatchEvent({type:"touchMove",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}}else{if(this.rollOver){this.rollOver=false;this.dispatchEvent({type:"touchOut",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}}}}else{if(this.rollOver&&this.visible){this.dispatchEvent({type:"touchOut",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}this.rollOver=false}};this.touchEnd=function(){for(var i=subLayer.length-1;i>=0;i--){var imageObj=subLayer[i];imageObj.touchEnd()}if(!this.mouseEnabled){this.rollOver=false;return}if(!ja_touch_up){if(this.visible){if(ja_touch_x>=this.global_x&&ja_touch_x<=(this.global_x+this.w)&&ja_touch_y>=this.global_y&&ja_touch_y<=(this.global_y+this.h)){ja_touch_up=true;this.dispatchEvent({type:"touchUp",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}}}this.rollOver=false}};jaction.prototype.MovieImageClass=function(clone){EventDispatcher.initialize(this);this.image=new Image();this.x=0;this.y=0;this.w=0;this.h=0;this.alpha=1;this.visible=true;this.rollOver=false;this.mouseEnabled=true;this.frameCount=0;this.frame=1;this.startFrame=1;this.stopFrame=0;this.incFrame=1;this.maxFrame=1;this.cropWidth=50;this.playCheck=true;this.loop=true;this.global_x=this.x;this.global_y=this.y;this.global_sx=1;this.global_sy=1;this.global_alpha=this.alpha;this.parentObj=null;var subLayer=[];var me=this;if(clone){this.image=clone.image;this.w=clone.cropWidth;this.h=this.image.height;this.height=this.image.height;this.width=clone.cropWidth;this.maxFrame=clone.maxFrame}else{this.image.onload=function(){me.w=me.cropWidth;me.h=me.image.height;me.height=me.image.height;me.width=me.cropWidth;me.maxFrame=Math.floor(me.image.width/me.cropWidth);me.dispatchEvent({type:"onLoad",target:me})}}this.draw=function(){if(this.visible){if(this.playCheck){this.frameCount++;if((this.frameCount%this.incFrame)==0){this.frameCount=0;this.frame++;if(this.frame>this.maxFrame){if(this.loop){this.frame=1}else{this.frame=this.maxFrame;this.playCheck=false}}if(this.stopFrame>0){if(this.frame>this.stopFrame){if(this.loop){this.frame=this.startFrame}else{this.frame=this.stopFrame;this.playCheck=false}}}}}var ua=navigator.userAgent;if(ua.indexOf("Android 2.1")>0){var rate=Math.sqrt(320/screen.width);ja_context.scale(rate,rate);this.cropWidthtmp=this.cropWidth*rate}else{this.cropWidthtmp=this.cropWidth}var sX=this.w/this.width;var sY=this.h/this.height;if(this.parentObj!=null){this.global_x=this.parentObj.global_x+this.x;this.global_y=this.parentObj.global_y+this.y;this.global_sx=this.parentObj.global_sx*sX;this.global_sy=this.parentObj.global_sy*sY;this.global_alpha=this.parentObj.global_alpha*this.alpha}else{this.global_x=this.x;this.global_y=this.y;this.global_sx=sX;this.global_sy=sY;this.global_alpha=this.alpha}if(this.global_alpha!=ja_context.globalAlpha){ja_context.globalAlpha=this.global_alpha}ja_context.translate(this.x,this.y);ja_context.scale(this.global_sx,this.global_sy);ja_context.drawImage(this.image,(this.frame-1)*this.cropWidthtmp,0,this.cropWidthtmp,this.height,0,0,this.width,this.height)}for(var i=0;i<subLayer.length;i++){ja_context.save();var imageObj=subLayer[i];imageObj.draw();ja_context.restore()}me.dispatchEvent({type:"onEnterFrame",target:me})};this.addChild=function(imageObj){ja.addChild(imageObj,subLayer,this)};this.getChildAt=function(depth){return ja.getChildAt(depth,subLayer)};this.getChildByName=function(name){return ja.getChildByName(name,subLayer)};this.removeChild=function(imageObj){ja.removeChild(imageObj,subLayer)};this.removeChildAt=function(depth){ja.removeChildAt(depth,subLayer)};this.numChildren=function(){return ja.numChildren(subLayer)};this.playAndLoop=function(startFrame,endFrame){this.frameCount=0;this.loop=true;this.playCheck=true;this.frame=startFrame;this.startFrame=startFrame;this.stopFrame=endFrame};this.playAndStop=function(startFrame,endFrame){this.frameCount=0;this.loop=false;this.playCheck=true;this.frame=startFrame;this.startFrame=startFrame;this.stopFrame=endFrame};this.play=function(){this.frameCount=0;this.loop=true;this.stopFrame=0;this.playCheck=true};this.stop=function(){this.frameCount=0;this.loop=false;this.stopFrame=0;this.playCheck=false};this.gotoAndPlay=function(frameNo){this.frameCount=0;this.loop=true;this.stopFrame=0;this.frame=frameNo;this.playCheck=true};this.gotoAndStop=function(frameNo){this.frameCount=0;this.loop=false;this.stopFrame=0;this.frame=frameNo;this.playCheck=false};this.onLoad=function(imagepath,crop){this.cropWidth=crop;this.image.src=imagepath};this.destroy=function(){EventDispatcher.destroy(this);this.image=null};this.mouseChildren=function(mouseEnable){ja.mouseChildren(subLayer,mouseEnable)};this.touchEventCh=function(){for(var i=subLayer.length-1;i>=0;i--){var imageObj=subLayer[i];imageObj.touchEventCh()}if(!this.mouseEnabled){this.rollOver=false;return}if(!ja_touch_flg){if(this.visible){if(ja_touch_x>=this.global_x&&ja_touch_x<=(this.global_x+this.w)&&ja_touch_y>=this.global_y&&ja_touch_y<=(this.global_y+this.h)){ja_touch_flg=true;if(!this.rollOver){this.dispatchEvent({type:"touchIn",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}else{this.dispatchEvent({type:"touchMove",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}this.rollOver=true}else{if(this.rollOver){this.dispatchEvent({type:"touchOut",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}this.rollOver=false}}}else{if(this.rollOver&&this.visible){this.dispatchEvent({type:"touchOut",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}this.rollOver=false}};this.touchEnd=function(){for(var i=subLayer.length-1;i>=0;i--){var imageObj=subLayer[i];imageObj.touchEnd()}if(!this.mouseEnabled){this.rollOver=false;return}if(!ja_touch_up){if(this.visible){if(ja_touch_x>=this.global_x&&ja_touch_x<=(this.global_x+this.w)&&ja_touch_y>=this.global_y&&ja_touch_y<=(this.global_y+this.h)){ja_touch_up=true;this.dispatchEvent({type:"touchUp",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}}}this.rollOver=false}};jaction.prototype.ImageUnitClass=function(){var imageObj=new Object();var imageArray=new Array();this.loadCount=0;this.loadTotal=0;var me=this;EventDispatcher.initialize(this);this.load=function(loadArray){this.loadCount=0;this.loadTotal=loadArray.length;imageArray=new Array();this.imageArray=imageArray;for(var i=0;i<loadArray.length;i++){var tmpArray=loadArray[i].split("/");var tmp=tmpArray[tmpArray.length-1];tmpArray=tmp.split(".");var name=tmpArray[0];var imageObj=new ja.ImageClass();imageArray.push(imageObj);imageObj.addEventListener("onLoad",this);imageObj.onLoad(loadArray[i]);this[name]=imageObj}};this.onLoad=function(e){this.loadCount++;if(this.loadCount>=this.loadTotal){me.dispatchEvent({type:"onLoad",target:me})}};this.destroy=function(){for(var i=0;i<imageArray.length;i++){var imageObj=imageArray[i];imageObj.destroy()}imageArray=null}};jaction.prototype.BoxClass=function(w,h,color){EventDispatcher.initialize(this);this.x=0;this.y=0;this.w=w;this.h=h;this.alpha=1;this.color=color;this.visible=true;this.rollOver=false;this.mouseEnabled=true;var me=this;var width=this.w;var height=this.h;this.global_x=this.x;this.global_y=this.y;this.global_sx=1;this.global_sy=1;this.global_alpha=this.alpha;this.parentObj=null;var subLayer=[];this.scaleX=function(scale){this.w=width*scale};this.scaleY=function(scale){this.h=height*scale};this.draw=function(){me.dispatchEvent({type:"onEnterFrame",target:this});if(this.visible){ja_context.globalAlpha=this.alpha;var ua=navigator.userAgent;if(ua.indexOf("Android 2.1")>0){var rate=Math.sqrt(320/screen.width);ja_context.scale(rate,rate)}var sX=this.w/width;var sY=this.h/height;if(this.parentObj!=null){this.global_x=this.parentObj.global_x+this.x;this.global_y=this.parentObj.global_y+this.y;this.global_sx=this.parentObj.global_sx*sX;this.global_sy=this.parentObj.global_sy*sY;this.global_alpha=this.parentObj.global_alpha*this.alpha}else{this.global_x=this.x;this.global_y=this.y;this.global_sx=sX;this.global_sy=sY;this.global_alpha=this.alpha}if(this.global_alpha!=ja_context.globalAlpha){ja_context.globalAlpha=this.global_alpha}ja_context.translate(this.x,this.y);ja_context.scale(this.global_sx,this.global_sy);ja_context.fillStyle=this.color;ja_context.fillRect(0,0,width,height);for(var i=0;i<subLayer.length;i++){ja_context.save();var imageObj=subLayer[i];imageObj.draw();ja_context.restore()}}};this.addChild=function(imageObj){ja.addChild(imageObj,subLayer,this)};this.getChildAt=function(depth){return ja.getChildAt(depth,subLayer)};this.getChildByName=function(name){return ja.getChildByName(name,subLayer)};this.removeChild=function(imageObj){ja.removeChild(imageObj,subLayer)};this.removeChildAt=function(depth){ja.removeChildAt(depth,subLayer)};this.numChildren=function(){return ja.numChildren(subLayer)};this.destroy=function(){EventDispatcher.destroy(this);this.image=null};this.mouseChildren=function(mouseEnable){ja.mouseChildren(subLayer,mouseEnable)};this.touchEventCh=function(){for(var i=subLayer.length-1;i>=0;i--){var imageObj=subLayer[i];imageObj.touchEventCh()}if(!this.mouseEnabled){this.rollOver=false;return}if(!ja_touch_flg){if(this.visible){if(ja_touch_x>=this.global_x&&ja_touch_x<=(this.global_x+this.w)&&ja_touch_y>=this.global_y&&ja_touch_y<=(this.global_y+this.h)){ja_touch_flg=true;if(!this.rollOver){this.dispatchEvent({type:"touchIn",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}else{this.dispatchEvent({type:"touchMove",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}this.rollOver=true}else{if(this.rollOver){this.dispatchEvent({type:"touchOut",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}this.rollOver=false}}}else{if(this.rollOver&&this.visible){this.dispatchEvent({type:"touchOut",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}this.rollOver=false}};this.touchEnd=function(){for(var i=subLayer.length-1;i>=0;i--){var imageObj=subLayer[i];imageObj.touchEnd()}if(!this.mouseEnabled){this.rollOver=false;return}if(!ja_touch_up){if(this.visible){if(ja_touch_x>=this.global_x&&ja_touch_x<=(this.global_x+this.w)&&ja_touch_y>=this.global_y&&ja_touch_y<=(this.global_y+this.h)){ja_touch_up=true;this.dispatchEvent({type:"touchUp",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}}}this.rollOver=false}};jaction.prototype.CircleClass=function(r,color){EventDispatcher.initialize(this);this.x=0;this.y=0;this.r=r;this.start=0;this.end=Math.PI*2;this.alpha=1;this.color=color;this.visible=true;this.rollOver=false;this.mouseEnabled=true;this.type="fill";var sX=1;var sY=1;var me=this;this.global_x=this.x;this.global_y=this.y;this.global_sx=1;this.global_sy=1;this.global_alpha=this.alpha;this.parentObj=null;var subLayer=[];this.scaleX=function(scale){sX=scale};this.scaleY=function(scale){sY=scale};this.draw=function(){me.dispatchEvent({type:"onEnterFrame",target:this});if(this.visible){ja_context.globalAlpha=this.alpha;var ua=navigator.userAgent;if(ua.indexOf("Android 2.1")>0){var rate=Math.sqrt(320/screen.width);ja_context.scale(rate,rate)}if(this.parentObj!=null){this.global_x=this.parentObj.global_x+this.x;this.global_y=this.parentObj.global_y+this.y;this.global_sx=this.parentObj.global_sx*sX;this.global_sy=this.parentObj.global_sy*sY;this.global_alpha=this.parentObj.global_alpha*this.alpha}else{this.global_x=this.x;this.global_y=this.y;this.global_sx=sX;this.global_sy=sY;this.global_alpha=this.alpha}if(this.global_alpha!=ja_context.globalAlpha){ja_context.globalAlpha=this.global_alpha}ja_context.translate(this.x,this.y);ja_context.scale(this.global_sx,this.global_sy);ja_context.fillStyle=this.color;ja_context.beginPath();ja_context.arc(0,0,this.r,this.start,this.end,false);if(this.type=="fill"){ja_context.fill()}else{ja_context.stroke()}for(var i=0;i<subLayer.length;i++){ja_context.save();var imageObj=subLayer[i];imageObj.draw();ja_context.restore()}}};this.addChild=function(imageObj){ja.addChild(imageObj,subLayer,this)};this.getChildAt=function(depth){return ja.getChildAt(depth,subLayer)};this.getChildByName=function(name){return ja.getChildByName(name,subLayer)};this.removeChild=function(imageObj){ja.removeChild(imageObj,subLayer)};this.removeChildAt=function(depth){ja.removeChildAt(depth,subLayer)};this.numChildren=function(){return ja.numChildren(subLayer)};this.destroy=function(){EventDispatcher.destroy(this);this.image=null};this.mouseChildren=function(mouseEnable){ja.mouseChildren(subLayer,mouseEnable)};this.touchEventCh=function(){for(var i=subLayer.length-1;i>=0;i--){var imageObj=subLayer[i];imageObj.touchEventCh()}if(!this.mouseEnabled){this.rollOver=false;return}if(!ja_touch_flg){if(this.visible){if(ja_touch_x>=this.global_x&&ja_touch_x<=(this.global_x+this.r)&&ja_touch_y>=this.global_y&&ja_touch_y<=(this.global_y+this.r)){ja_touch_flg=true;if(!this.rollOver){this.dispatchEvent({type:"touchIn",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}else{this.dispatchEvent({type:"touchMove",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}this.rollOver=true}else{if(this.rollOver){this.dispatchEvent({type:"touchOut",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}this.rollOver=false}}}else{if(this.rollOver&&this.visible){this.dispatchEvent({type:"touchOut",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}this.rollOver=false}};this.touchEnd=function(){for(var i=subLayer.length-1;i>=0;i--){var imageObj=subLayer[i];imageObj.touchEnd()}if(!this.mouseEnabled){this.rollOver=false;return}if(!ja_touch_up){if(this.visible){if(ja_touch_x>=this.global_x&&ja_touch_x<=(this.global_x+this.r)&&ja_touch_y>=this.global_y&&ja_touch_y<=(this.global_y+this.r)){ja_touch_up=true;this.dispatchEvent({type:"touchUp",target:this,touch_x:(ja_touch_x-this.global_x),touch_y:(ja_touch_y-this.global_y)})}}}this.rollOver=false}};jaction.prototype.TextClass=function(){this.px="18px";this.font="'ＭＳ Ｐゴシック'";this.color="#000000";this.x=0;this.y=0;this.text="";this.visible=true;this.draw=function(){if(this.visible){var ua=navigator.userAgent;if(ua.indexOf("Android 2.1")>0){var rate=Math.sqrt(320/screen.width);ja_context.scale(rate,rate)}if(this.global_alpha!=ja_context.globalAlpha){ja_context.globalAlpha=this.global_alpha}ja_context.translate(this.x,this.y);ja_context.font=this.px+" "+this.font;ja_context.fillStyle=this.color;ja_context.fillText(this.text,0,0)}};this.touchEventCh=function(){};this.touchEnd=function(){}};ja_HitClass=function(){this.intersect=function(A,B){if((B.global_x<=A.global_x)&&(A.global_x<=B.global_x+B.w)&&(B.global_y<=A.global_y)&&(A.global_y<=B.global_y+B.h)){return true}else if((B.global_x<=A.global_x+A.w)&&(A.global_x+A.w<=B.global_x+B.w)&&(B.global_y<=A.global_y)&&(A.global_y<=B.global_y+B.h)){return true}else if((B.global_x<=A.global_x)&&(A.global_x<=B.global_x+B.w)&&(B.global_y<=A.global_y+A.h)&&(A.global_y+A.h<=B.global_y+B.h)){return true}else if((B.global_x<=A.global_x+A.w)&&(A.global_x+A.w<=B.global_x+B.w)&&(B.global_y<=A.global_y+A.h)&&(A.global_y+A.h<=B.global_y+B.h)){return true}else if((A.global_x<=B.global_x)&&(B.global_x<=A.global_x+A.w)&&(A.global_y<=B.global_y)&&(B.global_y<=A.global_y+A.h)){return true}else if((A.global_x<=B.global_x+B.w)&&(B.global_x+B.w<=A.global_x+A.w)&&(A.global_y<=B.global_y)&&(B.global_y<=A.global_y+A.h)){return true}else if((A.global_x<=B.global_x)&&(B.x<=A.global_x+A.w)&&(A.global_y<=B.global_y+B.h)&&(B.global_y+B.h<=A.global_y+A.h)){return true}else if((A.global_x<=B.global_x+B.w)&&(B.global_x+B.w<=A.global_x+A.w)&&(A.global_y<=B.global_y+B.h)&&(B.global_y+B.h<=A.global_y+A.h)){return true}else{return false}};this.point=function(A,x,y){if((A.global_x<=x)&&(x<=A.global_x+A.w)&&(A.global_y<=y)&&(y<=A.global_y+A.h)){return true}else{return false}}};function EventDispatcher(){}EventDispatcher.initialize=function(obj){obj.eventContainer=new Object();obj.addEventListener=this._addEventListener;obj.removeEventListener=this._removeEventListener;obj.dispatchEvent=this._dispatchEvent};EventDispatcher.destroy=function(obj){obj.eventContainer=null;obj.addEventListener=null;obj.removeEventListener=null;obj.dispatchEvent=null};EventDispatcher._addEventListener=function(eventName,object){if(this.eventContainer[eventName]==null){this.eventContainer[eventName]=new Array()}this.removeEventListener(eventName,object);this.eventContainer[eventName].push(object)};EventDispatcher._removeEventListener=function(eventName,object){var listener_ar=this.eventContainer[eventName];if(listener_ar==undefined)return;var imax=listener_ar.length;for(var i=0;i<imax;i++){var listener=listener_ar[i];if(listener==object){listener_ar.splice(i,1);return}}};EventDispatcher._dispatchEvent=function(eventObj){if(eventObj.target==null){eventObj.target=this}var eventName=eventObj.type;if(this.eventContainer[eventName]==null)return;var imax=this.eventContainer[eventName].length;for(var i=0;i<imax;i++){var listener=this.eventContainer[eventName][i];if(typeof(listener)=="object"){listener[eventName].apply(listener,new Array(eventObj))}}};jaction.prototype.TweenClass=function(objT,propT,easingT,beginT,finishT,durationT){EventDispatcher.initialize(this);this.obj=objT;this.prop=propT;this.easing=easingT;this.begin=beginT;this.finish=finishT;this.duration=durationT;var durationCount=0;this.stop=function(){ja.root.removeEventListener("onEnterFrame",this)};this.play=function(){this.obj[this.prop]=this.begin;durationCount=0;ja.root.addEventListener("onEnterFrame",this)};this.onEnterFrame=function(){durationCount++;var tweenData;if(durationCount>=this.duration){tweenData=this.finish;ja.root.removeEventListener("onEnterFrame",this);this.obj[this.prop]=tweenData;this.dispatchEvent({type:"tweenEnd",target:this})}else{var countPer=durationCount/this.duration;tweenData=(this.finish-this.begin)*(countPer+this.easing/(100*Math.PI)*Math.sin(Math.PI*countPer))+this.begin;this.obj[this.prop]=tweenData}};this.destroy=function(){this.stop();EventDispatcher.destroy(this);this.obj=null};this.play()};jaction.prototype.AudioClass=function(){var ua=navigator.userAgent;var audioObject=new Object();var androidFlg;if(ua.indexOf("Android")>0){androidFlg=true}else{androidFlg=false}this.add=function(soundpath){var tmpArray=soundpath.split("/");var tmp=tmpArray[tmpArray.length-1];tmpArray=tmp.split(".");var soundname=tmpArray[0];if(androidFlg){audioObject[soundname]=soundpath}else{audioObject[soundname]=new Audio(soundpath)}};this.onLoad=function(audiopath){this.audio.src=audiopath};this.play=function(soundname){if(androidFlg){document["sound"].soundSet(audioObject[soundname])}else{audioObject[soundname].load();audioObject[soundname].play()}};this.pause=function(soundname){if(androidFlg){document["sound"].soundPause()}else{audioObject[soundname].pause()}};this.volume=function(soundvolume){for(var i in audioObject){audioObject[i].volume=soundvolume}};this.destroy=function(){audioObject=null}};var ja=new jaction();function ja_CanvasStart(){ja.imageUnitObj=new ja.ImageUnitClass();ja.hitObj=new ja_HitClass();ja.stage=new ja.Container();ja_context=ja_canvas.getContext("2d");ja.root.onSetUp();ja.root.onInit();ja.root.name="root";return ja.root}function ja_touchstart(event){event.preventDefault();ja_downCheck=true;ja_btnOverCheck(event)}function ja_touchmove(event){event.preventDefault();if(ja_downCheck){ja_btnOverCheck(event)}}function ja_touchend(event){event.preventDefault();ja_downCheck=false;ja_touch_up=false;ja.stage.touchEnd()}function ja_btnOverCheck(){ja_touch_x=(ja.root.isTouch?event.changedTouches[0].pageX:event.pageX);ja_touch_y=(ja.root.isTouch?event.changedTouches[0].pageY:event.pageY);ja_touch_flg=false;ja.stage.touchEventCh()}ja_MainClass=function(){EventDispatcher.initialize(this);window.addEventListener("orientationchange",function(){if(Math.abs(window.orientation)===90){if(ja_portrait){window.scrollTo(0,1);ja_portrait=false;ja.root.dispatchEvent({type:"orientationChange",target:ja.root,portrait:ja_portrait})}}else{if(!ja_portrait){window.scrollTo(0,1);ja_portrait=true;ja.root.dispatchEvent({type:"orientationChange",target:ja.root,portrait:ja_portrait})}}},false);window.addEventListener('devicemotion',function(e){var gravity=e.accelerationIncludingGravity;var accele=e.acceleration;var rotation=e.rotationRate;ja.root.dispatchEvent({type:"devicemotion",target:ja.root,gravity:gravity,accele:accele,rotation:rotation})})};ja_onEnterFrame=function(){ja.stage.draw();ja.root.dispatchEvent({type:"onEnterFrame",target:ja.root})};ja_MainClass.prototype.onSetUp=function(){this.isTouch=('ontouchstart'in window);if(this.isTouch){this.startEvent="touchstart";this.moveEvent="touchmove";this.endEvent="touchend"}else{this.startEvent="mousedown";this.moveEvent="mousemove";this.endEvent="mouseup"}ja_canvas.addEventListener(this.startEvent,ja_touchstart,false);ja_canvas.addEventListener(this.moveEvent,ja_touchmove,false);ja_canvas.addEventListener(this.endEvent,ja_touchend,false)};
ja_MainClass.prototype.onInit = function()
{
	ja.stage.addChild(new ja.BoxClass(320 , 480 , "#ffffff")); //ステージの大きさと色を指定
	setInterval(ja_onEnterFrame ,100); //fps変更時はここを変更
};
